name: Verify Schedule Job

on:
  schedule:
    - cron: '5 9 22 * *' # Runs at 09:05 UTC every 22nd of the month
  workflow_dispatch:
    inputs:
      env:
        type: choice
        default: green
        options:
          - blue
          - green
          - ctest

jobs:
  new-deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment: ${{ github.event_name == 'schedule' && fromJson('["blue", "green"]') || fromJson(format('["{0}"]', inputs.env)) }}
    steps:
      - name: Print Variables
        env:
          environment: ${{ matrix.environment }}
          product_name: ${{ format('app-bs-{0}', matrix.environment) }}
        run: |
          echo "Environment: $environment"
          echo "Product Name: $product_name"
